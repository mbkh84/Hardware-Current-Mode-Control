Version 4
SHEET 1 1964 1008
WIRE 144 80 -432 80
WIRE 208 80 144 80
WIRE -1184 96 -1280 96
WIRE 496 96 448 96
WIRE 608 96 576 96
WIRE 912 96 912 32
WIRE 1120 96 912 96
WIRE 1296 96 1120 96
WIRE 1456 96 1296 96
WIRE 1120 112 1120 96
WIRE 448 128 448 96
WIRE -1280 144 -1280 96
WIRE 1296 144 1296 96
WIRE -432 160 -432 80
WIRE -64 176 -208 176
WIRE -16 176 -64 176
WIRE 0 176 -16 176
WIRE 1120 192 1120 176
WIRE -64 208 -64 176
WIRE 144 208 144 80
WIRE 1456 208 1456 176
WIRE 1584 208 1456 208
WIRE -208 224 -208 176
WIRE 448 224 448 208
WIRE 448 224 352 224
WIRE 912 224 912 96
WIRE 1456 224 1456 208
WIRE 448 240 448 224
WIRE -1280 304 -1280 224
WIRE -432 320 -432 240
WIRE -208 320 -208 288
WIRE -208 320 -432 320
WIRE -176 320 -208 320
WIRE -64 320 -64 288
WIRE -64 320 -176 320
WIRE 144 320 144 288
WIRE 144 320 -64 320
WIRE 448 320 144 320
WIRE 608 320 608 96
WIRE 608 320 448 320
WIRE 912 320 912 304
WIRE 912 320 608 320
WIRE 1120 320 1120 272
WIRE 1120 320 912 320
WIRE 1296 320 1296 224
WIRE 1296 320 1120 320
WIRE 1456 320 1456 304
WIRE 1456 320 1296 320
WIRE 1024 352 976 352
WIRE 1136 352 1088 352
WIRE -1120 400 -1280 400
WIRE 352 400 352 224
WIRE 448 400 352 400
WIRE 672 400 528 400
WIRE 560 416 528 416
WIRE 672 416 672 400
WIRE 672 416 624 416
WIRE 976 416 976 352
WIRE 1024 416 976 416
WIRE 1136 416 1136 352
WIRE 1136 416 1104 416
WIRE 528 448 528 416
WIRE 528 448 496 448
WIRE 976 464 976 416
WIRE 976 464 944 464
WIRE 496 480 496 448
WIRE 544 480 496 480
WIRE 672 480 672 416
WIRE 672 480 624 480
WIRE -1280 496 -1280 400
WIRE 800 496 800 464
WIRE 1136 496 1136 416
WIRE 1136 496 800 496
WIRE 1136 512 1136 496
WIRE 1216 512 1136 512
WIRE 1360 512 1360 496
WIRE 1360 512 1296 512
WIRE 1440 512 1360 512
WIRE 1584 512 1584 208
WIRE 1584 512 1520 512
WIRE 1136 544 1136 512
WIRE 1136 544 1088 544
WIRE 336 560 224 560
WIRE 816 560 800 560
WIRE 976 560 976 464
WIRE 976 560 896 560
WIRE 1024 560 976 560
WIRE 672 576 672 480
WIRE 672 576 608 576
WIRE 1136 576 1088 576
WIRE 336 592 336 560
WIRE 496 592 496 480
WIRE 496 592 336 592
WIRE 544 592 496 592
WIRE 1136 592 1136 576
WIRE 1184 592 1136 592
WIRE 1216 592 1184 592
WIRE 1360 592 1296 592
WIRE 1440 592 1360 592
WIRE 1760 592 1520 592
WIRE 176 608 64 608
WIRE 672 608 608 608
WIRE 736 608 672 608
WIRE 800 608 800 560
WIRE 800 608 736 608
WIRE 64 624 64 608
WIRE 1184 624 1184 592
WIRE 1216 624 1184 624
WIRE 1760 624 1760 592
WIRE 1360 640 1360 592
WIRE -1280 656 -1280 576
WIRE 1184 656 1184 624
WIRE 1216 656 1216 624
WIRE 1280 656 1216 656
WIRE 176 672 176 608
WIRE 224 688 224 560
WIRE 1136 688 1136 592
WIRE 1136 688 1120 688
WIRE 1760 720 1760 704
WIRE -1264 752 -1376 752
WIRE 1280 752 1280 656
WIRE 1184 768 1184 720
WIRE 1184 768 1120 768
WIRE 1760 832 1760 800
WIRE -1264 848 -1264 832
WIRE -1264 864 -1264 848
WIRE -1376 944 -1376 928
WIRE -1264 944 -1376 944
FLAG -1280 656 0
FLAG -1120 400 Doff
FLAG -176 320 0
FLAG 208 80 b
FLAG -16 176 c
FLAG 912 32 a
FLAG -1376 752 Vcc
FLAG 1056 528 Vcc
FLAG -1376 928 Vee
FLAG -1264 848 0
FLAG 1760 832 0
FLAG 1056 592 0
FLAG 64 608 Don
FLAG 224 736 0
FLAG 176 752 0
FLAG 1120 768 0
FLAG 1360 704 0
FLAG 1360 432 0
FLAG -1184 96 Doxx
FLAG -1280 304 0
FLAG 1280 896 0
FLAG 576 560 Vcc
FLAG 576 624 0
FLAG 672 688 0
FLAG 736 672 0
SYMBOL voltage 1760 608 R0
WINDOW 0 -32 56 VBottom 2
WINDOW 3 90 9 VTop 2
WINDOW 123 60 56 VTop 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 .5 100k)
SYMATTR Value2 AC .5 0
SYMBOL voltage -432 144 R0
SYMATTR InstName Vin
SYMATTR Value {Vin}
SYMBOL schottky -192 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value RBR30NS60A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 464 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rind
SYMATTR Value {Rind}
SYMBOL ind 480 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lout
SYMATTR Value {Lout}
SYMBOL res 1104 176 R0
SYMATTR InstName Resr
SYMATTR Value {Resr}
SYMBOL res 1280 128 R0
SYMATTR InstName Rload
SYMATTR Value {Rload}
SYMBOL cap 1104 112 R0
SYMATTR InstName Cout
SYMATTR Value {Cout}
SYMBOL bi2 912 304 R180
WINDOW 0 24 81 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Ba
SYMATTR Value I=I(Lout)
SYMBOL bi 144 288 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -235 249 Left 2
SYMATTR InstName Bb
SYMATTR Value I=V(Don)*I(Lout)/(V(Don)+V(Doff))
SYMBOL bi -64 288 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -190 -72 Left 2
SYMATTR InstName Bc
SYMATTR Value I=V(Doff)*I(Lout)/(V(Don)+V(Doff))
SYMBOL bv 448 112 R0
WINDOW 3 -28 -122 Left 2
SYMATTR Value V=V(Don)*V(a,b) + V(Doff) * V(a,c)
SYMATTR InstName BL
SYMBOL bv -1280 480 R0
WINDOW 3 -199 153 Left 2
SYMATTR Value V=min(2,1-V(Don))
SYMATTR InstName BEDoff
SYMBOL res 1440 80 R0
SYMATTR InstName R1
SYMATTR Value 90
SYMBOL res 1440 208 R0
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL voltage -1264 736 R0
WINDOW 3 39 69 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 41 40 Left 2
SYMATTR Value 12
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMBOL voltage -1264 848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V3
SYMATTR Value 3
SYMBOL voltage 1760 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V5
SYMATTR Value .5
SYMBOL Opamps\\LT1677 1056 496 M0
SYMATTR InstName U5
SYMBOL e 176 656 M0
SYMATTR InstName E1
SYMATTR Value .0833
SYMBOL res 1536 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1536 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1312 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1312 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 1120 400 R90
WINDOW 0 48 112 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 200k
SYMBOL res 1136 784 R180
WINDOW 0 63 115 Left 2
WINDOW 3 39 77 Left 2
SYMATTR InstName R8
SYMATTR Value 200k
SYMBOL cap 1344 432 R0
SYMATTR InstName C1
SYMATTR Value 636.61p
SYMBOL cap 1344 640 R0
SYMATTR InstName C2
SYMATTR Value 636.61p
SYMBOL bv -1280 128 R0
WINDOW 3 -269 99 Left 2
SYMATTR Value V=min(abs(2*abs(I(Lout))*Lout/(Ts*(Vin-V(a))*V(Don))-V(Don)),1-V(Don))
SYMATTR InstName BEDoff1
SYMBOL cap 1168 656 R0
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL cap 1088 336 R90
WINDOW 0 44 67 VBottom 2
WINDOW 3 20 -4 VTop 2
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL res 960 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1296 848 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL cap 1264 832 R0
SYMATTR InstName C5
SYMATTR Value 10p
SYMBOL cap 864 448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10p
SYMBOL Opamps\\LT1677 576 528 M0
SYMATTR InstName U1
SYMBOL res 912 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 2k
SYMBOL res 640 464 R90
WINDOW 0 46 99 VBottom 2
WINDOW 3 20 4 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 544 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 2k
SYMBOL cap 720 608 R0
SYMATTR InstName C7
SYMATTR Value 10p
SYMBOL cap 624 400 R90
WINDOW 0 37 69 VBottom 2
WINDOW 3 16 3 VTop 2
SYMATTR InstName C8
SYMATTR Value 10p
SYMBOL res 656 592 R0
SYMATTR InstName R14
SYMATTR Value 1k
TEXT 1144 -384 Left 2 !.param Vin=50v\n.param Lout=680n\n.param Cout=47n\n.param Rload=5\n.param Resr=10m\n.param Rind=20m\n.param Fs=5M\n.param Ts={1/Fs}
TEXT -1550 992 Left 2 !.tran 0 2m 0
